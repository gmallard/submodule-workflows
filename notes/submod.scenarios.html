<!DOCTYPE html
PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--

Copyright (C) 2008 Guy Allard

This file is part of the git Submodules Workflows project.

    The git Submodules Workflows project is free software: you can redistribute it 
    and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    The git Submodules Workflows project is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with the git Submodules Workflows project.  
    If not, see <http://www.gnu.org/licenses/>.
-->
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
<meta name="author" content="Guy Allard" />
<meta name="description" content="git Submodule Scenarios Page" />
<meta name="keywords" content="git, SCM, Submodules" />
<link rel="stylesheet" type="text/css" href="../common/submodules.css" />
<title>
Submodule Scenarios
</title>
</head>
<body>
<div class="container" >
<div class="header" >
<h1 style="text-align: center; text-decoration: underline" >
Submodule Workflow Scenarios
</h1>
<br />
</div>
<div class="left" >
<br />
<a href="../readme.html">Top</a>
<br /><br />
<a href="../notes/admin.html">Administrative</a>
<br />
<a href="../tutorial/readme.html">Tutorial</a>
<br />
<a href="../salted-super/readme.html">Salted</a>
<br />
<a href="../empty-super/readme.html">Empty</a>
<br />
<a href="../notes/readme.html">Miscellaneous</a>
</div>
<div class="content" >
<h1>Introduction</h1>
<p>This page shows several workflow scenarios in an environment with two users, and 
depicts how timing of specific user actions can influence overall workflow
procedures.
</p>
<p>Start with the set up for the <a href="../empty-super/readme.html" >empty supermodule</a>
example, and use the two git users set up originally in <a href="../notes/admin.html" >
Administrative Requirements</a>.
</p>
<p style="color: blue" >
Note: do <em>not</em> depend on the SHA1 hashes in the example outputs
in order to understand the example scenarios.  The example outputs
have been culled from several different starting points, and exact changes.
</p>
<!-- ///////////////////////////////////////////////////////// -->
<hr />
<h1>Scenario 1</h1>
<h2>General Description</h2>
<p>
This scenario shows typical workflows between two users, where the workflows are
such that:
</p>
<ol>
<li>There are no merge conflicts</li>
<li>There are no timing overlaps which might cause changes in standard workflows</li>
</ol>
<h2>Timeline</h2>
<pre class="bl" >
User:gua: S---1---2----------------------------------------------------------------------

User:gub: S--------------3---4-----------------------------------------------------------
</pre>
<h2>Details</h2>
<h3>Commit/Push  1 - User:gua - Submodule</h3>
Typical Command Sequence:
<pre class="bl" >
<!-- See: sc1.cp1a.ua.sh -->
umask 002
cd
cd super
cd suba
echo a >>a.txt
git add a.txt
git commit -m "Add a.txt"
git pull
git push
</pre>
Typical results:
<pre class="bl" >
gua@oldpete:~$ sc1.cp1a.ua.sh 
+ umask 002
+ cd
+ cd super
+ cd suba
+ echo a
+ git add a.txt
+ git commit -m 'Add a.txt'
Created commit 352fc42: Add a.txt
 1 files changed, 1 insertions(+), 0 deletions(-)
 create mode 100644 a.txt
+ git pull
Already up-to-date.
+ git push
Counting objects: 4, done.
Compressing objects: 100% (2/2), done.
Unpacking objects: 100% (3/3), done.
Writing objects: 100% (3/3), 275 bytes, done.
Total 3 (delta 0), reused 0 (delta 0)
To file:///public/repos/suba.git
   09dae39..352fc42  master -> master
+ set +x
</pre>
<h3>Commit/Push 2 - User:gua - Supermodule</h3>
Typical Command Sequence:
<pre class="bl" >
<!-- See: sc1.cp2a.ua.sh -->
umask 002
cd
cd super
git status
git commit -a -m "Update suba with a.txt"
git pull
git push
</pre>
Typical Results:
<pre class="bl" >
gua@oldpete:~$ sc1.cp2a.ua.sh 
+ umask 002
+ cd
+ cd super
+ git status
# On branch master
# Changed but not updated:
#   (use "git add <file>..." to update what will be committed)
#
#       modified:   suba
#
no changes added to commit (use "git add" and/or "git commit -a")
+ git commit -a -m 'Update suba with a.txt'
Created commit 6eb0027: Update suba with a.txt
 1 files changed, 1 insertions(+), 1 deletions(-)
+ git pull
Already up-to-date.
+ git push
Counting objects: 3, done.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (2/2), 257 bytes, done.
Total 2 (delta 1), reused 0 (delta 0)
Unpacking objects: 100% (2/2), done.
To /public/repos/super.git
   df3cbea..6eb0027  master -> master
+ set +x
</pre>
<h3>Commit/Push  3 - User:gub - Submodule</h3>
Typical Command Sequence:
<pre class="bl" >
<!-- See: sc1.cp3a.ub.sh -->
umask 002
# Prep
cd super
git pull
git submodule update
cd suba
git checkout master
git pull
# add work
echo b >b.txt
git add .
git commit -m "Add file b.txt"
git pull
git push
</pre>
Typical Results:
<pre class="bl" >
gub@oldpete:~$ sc1.cp3a.ub.sh 
+ umask 002
+ cd super
+ git pull
remote: Counting objects: 3, done.
remote: Compressing objects: 100% (2/2)remote: , done.
remote: Total 2 (delta 1), reused 0 (delta 0)
Unpacking objects: 100% (2/2), done.
From /public/repos/super
   df3cbea..6eb0027  master     -> origin/master
Updating df3cbea..6eb0027
Fast forward
 suba |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)
+ git submodule update
remote: Counting objects: 4, done.
remote: Compressing objects: 100% (2/2)remote: , done.
remote: Total 3 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (3/3), done.
From file:///public/repos/suba
   09dae39..352fc42  master     -> origin/master
Submodule path 'suba': checked out '352fc420dd7718e63eb9d69230999f680abfe46c'
+ cd suba
+ git checkout master
Previous HEAD position was 352fc42... Add a.txt
Switched to branch "master"
+ git pull
Updating 09dae39..352fc42
Fast forward
 a.txt |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)
 create mode 100644 a.txt
+ echo b
+ git add .
+ git commit -m 'Add file b.txt'
Created commit 4a549d5: Add file b.txt
 1 files changed, 1 insertions(+), 0 deletions(-)
 create mode 100644 b.txt
+ git pull
Already up-to-date.
+ git push
Counting objects: 4, done.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 304 bytes, done.
Total 3 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (3/3), done.
To file:///public/repos/suba.git
   352fc42..4a549d5  master -> master
+ set +x
</pre>
<h3>Commit/Push  4 - User:gub - Supermodule</h3>
Typical Command Sequence:
<pre class="bl" >
<!-- See: sc1.cp4a.ub.sh -->
umask 002
cd
cd super
git status
git commit -a -m "Update suba with b.txt"
git pull
git push
</pre>
Typical Results:
<pre class="bl" >
gub@oldpete:~$ sc1.cp4a.ub.sh 
+ umask 002
+ cd
+ cd super
+ git status
# On branch master
# Changed but not updated:
#   (use "git add <file>..." to update what will be committed)
#
#       modified:   suba
#
no changes added to commit (use "git add" and/or "git commit -a")
+ git commit -a -m 'Update suba with b.txt'
Created commit a3efc93: Update suba with b.txt
 1 files changed, 1 insertions(+), 1 deletions(-)
+ git pull
Already up-to-date.
+ git push
Counting objects: 3, done.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (2/2), 257 bytes, done.
Total 2 (delta 1), reused 0 (delta 0)
Unpacking objects: 100% (2/2), done.
To /public/repos/super.git
   6eb0027..a3efc93  master -> master
+ set +x
</pre>
<!-- ///////////////////////////////////////////////////////// -->
<hr />
<h1>Scenario 2</h1>
<h2>General Description</h2>
<p>
This scenario shows typical workflows between two users, where the workflows are
such that:
</p>
<ol>
<li>There <em>are</em> merge conflicts</li>
<li>There are some timing overlaps which might cause changes in standard workflows</li>
</ol>
<p style="color: blue" >
Note: this scenario continues <em>immediately after</em> the conclusion of Scenario 1.
</p>
<h2>Timeline</h2>
<pre class="bl" >
User:gua: S---1----------3---------------------------------------------------------------

User:gub: S---------2---------4----------------------------------------------------------
</pre>
<h3>Commit/Push  1 - User:gua - Submodule</h3>
Typical Command Sequence:
<pre class="bl" >
<!-- See: sc2.cp1a.ua.sh -->
umask 002
cd
cd super
cd suba
echo a >>a.txt
git add a.txt
git commit -m "Modify a.txt"
git pull
git push
</pre>
Typical Results:
<pre class="bl" >
gua@oldpete:~$ sc2.cp1a.ua.sh 
+ umask 002
+ cd
+ cd super
+ cd suba
+ echo a
+ git add a.txt
+ git commit -m 'Modify a.txt'
Created commit 695364f: Modify a.txt
 1 files changed, 1 insertions(+), 0 deletions(-)
+ git pull
remote: Counting objects: 4, done.
remote: Compressing objects: 100% (2/2)remote: , done.
remote: Total 3 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (3/3), done.
From file:///public/repos/suba
   352fc42..4a549d5  master     -> origin/master
Merge made by recursive.
 b.txt |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)
 create mode 100644 b.txt
+ git push
Counting objects: 8, done.
Compressing objects: 100% (4/4), done.
Writing objects: 100% (5/5), 554 bytes, done.
Total 5 (delta 1), reused 0 (delta 0)
Unpacking objects: 100% (5/5), done.
To file:///public/repos/suba.git
   4a549d5..d252970  master -> master
+ set +x
</pre>
<h3>Commit/Push  2 - User:gub - Submodule</h3>
Typical Command Sequence:
<pre class="bl" >
<!-- See: sc2.cp2a.ub.sh -->
umask 002
cd
cd super
cd suba
echo bb >>b.txt
git add .
git commit -m "Modify b.txt"
git pull
git push
</pre>
Typical Results:
<pre class="bl" >
gub@oldpete:~$ sc2.cp2a.ub.sh 
+ umask 002
+ cd
+ cd super
+ cd suba
+ echo bb
+ git add .
+ git commit -m 'Modify b.txt'
Created commit a8a0b29: Modify b.txt
 1 files changed, 1 insertions(+), 0 deletions(-)
+ git pull
remote: Counting objects: 8, done.
remote: Compressing objects: 100% (4/4), done.
remote: Total 5 (delta 1), reused 0 (delta 0)
Unpacking objects: 100% (5/5), done.
From file:///public/repos/suba
   4a549d5..d252970  master     -> origin/master
Merge made by recursive.
 a.txt |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)
+ git push
Counting objects: 8, done.
Compressing objects: 100% (4/4), done.
Writing objects: 100% (5/5), 530 bytes, done.
Total 5 (delta 2), reused 0 (delta 0)
Unpacking objects: 100% (5/5), done.
To file:///public/repos/suba.git
   d252970..923a0dd  master -> master
+ set +x
</pre>
<h3>Commit/Push  3 - User:gua - Supermodule</h3>
Typical Command Sequence:
<pre class="bl" >
<!-- See: sc2.cp3a.ua.sh -->
umask 002
cd
cd super
git status
git add .
git commit -m "Update submodule suba from $(pwd)"
git pull
</pre>
Typical Results:
<pre class="bl" >
gua@oldpete:~$ sc2.cp3a.ua.sh 
+ umask 002
+ cd
+ cd super
+ git status
# On branch master
# Changed but not updated:
#   (use "git add <file>..." to update what will be committed)
#
#       modified:   suba
#
no changes added to commit (use "git add" and/or "git commit -a")
+ git add .
++ pwd
+ git commit -m 'Update submodule suba from /home/gua/super'
Created commit 4d52274: Update submodule suba from /home/gua/super
 1 files changed, 1 insertions(+), 1 deletions(-)
+ git pull
remote: Counting objects: 3, done.
remote: Compressing objects: 100% (2/2)remote: , done.
remote: Total 2 (delta 1), reused 0 (delta 0)
Unpacking objects: 100% (2/2), done.
From /public/repos/super
   6eb0027..a3efc93  master     -> origin/master
Auto-merged suba
CONFLICT (submodule): Merge conflict in suba - needs 4a549d5b12951dc3f8cf7e844da1dcf142e2b9f0
Automatic merge failed; fix conflicts and then commit the result.
+ set +x
</pre>
<p>Well, well.  A merge conflict.  Does the <a href="./conflict.resolution.html" >
Conflict Resolution</a> page help?  It seems to. We continue:
</p>
Recovery Command Sequence:
<pre class="bl" >
<!-- See: sc2.cp3b.ua.sh -->
umask 002
cd
cd super
git submodule update
git add suba
git commit -m "Update submodule suba from $(pwd), after conflict"
git push
</pre>
Recovery Results:
<pre class="bl" >
gua@oldpete:~$ sc2.cp3b.ua.sh 
+ umask 002
+ cd
+ cd super
+ git submodule update
remote: Counting objects: 8, done.
remote: Compressing objects: 100% (4/4), done.
remote: Total 5 (delta 2), reused 0 (delta 0)
Unpacking objects: 100% (5/5), done.
From file:///public/repos/suba
   d252970..923a0dd  master     -> origin/master
Submodule path 'suba': checked out '352fc420dd7718e63eb9d69230999f680abfe46c'
Submodule path 'suba': checked out 'd252970ac9512365b48ab4e8fb1190e5d1fbc047'
Submodule path 'suba': checked out '4a549d5b12951dc3f8cf7e844da1dcf142e2b9f0'
+ git add suba
++ pwd
+ git commit -m 'Update submodule suba from /home/gua/super, after conflict'
Created commit 01f4452: Update submodule suba from /home/gua/super, after conflict
+ git push
Counting objects: 5, done.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 488 bytes, done.
Total 3 (delta 1), reused 0 (delta 0)
Unpacking objects: 100% (3/3), done.
To /public/repos/super.git
   a3efc93..01f4452  master -> master
+ set +x
</pre>
<h3>Commit/Push  4 - User:gub - Supermodule</h3>
Typical Command Sequence:
<pre class="bl" >
<!-- See: sc2.cp4a.ub.sh -->
umask 002
cd
cd super
git status
git add suba
git commit -m "Update suba from $(pwd)"
git pull
git push
</pre>
Typical Results:
<pre class="bl" >
gub@oldpete:~$ sc2.cp4a.ub.sh 
+ umask 002
+ cd
+ cd super
+ git status
# On branch master
# Changed but not updated:
#   (use "git add <file>..." to update what will be committed)
#
#       modified:   suba
#
no changes added to commit (use "git add" and/or "git commit -a")
+ git add suba
++ pwd
+ git commit -m 'Update suba from /home/gub/super'
Created commit 9120c94: Update suba from /home/gub/super
 1 files changed, 1 insertions(+), 1 deletions(-)
+ git pull
remote: Counting objects: 5, done.
remote: Compressing objects: 100% (3/3), done.
remote: Total 3 (delta 1), reused 0 (delta 0)
Unpacking objects: 100% (3/3), done.
From /public/repos/super
   a3efc93..01f4452  master     -> origin/master
Already uptodate!
Merge made by recursive.
+ git push
Counting objects: 4, done.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 416 bytes, done.
Total 3 (delta 2), reused 0 (delta 0)
Unpacking objects: 100% (3/3), done.
To /public/repos/super.git
   01f4452..01013d1  master -> master
+ set +x
</pre>
<!-- ///////////////////////////////////////////////////////// -->
<hr />
<h1>Scenario 3</h1>
<h2>General Description</h2>
<p>
This scenario shows another typical workflow between two users, where the workflows are
such that:
</p>
<ol>
<li>There <em>are</em> merge conflicts</li>
<li>There are some timing overlaps which might cause changes in standard workflows</li>
</ol>
<p style="color: blue" >
Note: this scenario continues <em>immediately after</em> the conclusion of Scenario 2.
</p>
<h2>Timeline</h2>
<pre class="bl" >
User:gua: S---1---------------4----------------------------------------------------------

User:gub: S---------2---3----------------------------------------------------------------
</pre>
<h3>Commit/Push  1 - User:gua - Submodule</h3>
Typical Command Sequence:
<pre class="bl" >
<!-- See: sc3.cp1a.ua.sh -->
umask 002
cd
cd super
cd suba
git checkout master
echo a >>a.txt
git add a.txt
git commit -m "Modify a.txt"
git pull
git push
</pre>
Typical Results:
<pre class="bl" >
gua@oldpete:~$ sc3.cp1a.ua.sh 
+ umask 002
+ cd
+ cd super
+ cd suba
+ git checkout master
Previous HEAD position was 4a549d5... Add file b.txt
Switched to branch "master"
+ echo a
+ git add a.txt
+ git commit -m 'Modify a.txt'
Created commit 6921d7a: Modify a.txt
 1 files changed, 1 insertions(+), 0 deletions(-)
+ git pull
Merge made by recursive.
 b.txt |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)
+ git push
Counting objects: 8, done.
Compressing objects: 100% (4/4), done.
Writing objects: 100% (5/5), 578 bytes, done.
Total 5 (delta 1), reused 0 (delta 0)
Unpacking objects: 100% (5/5), done.
To file:///public/repos/suba.git
   923a0dd..bd4ab57  master -> master
+ set +x
</pre>
<h3>Commit/Push  2 - User:gub - Submodule</h3>
Typical Command Sequence:
<pre class="bl" >
<!-- See: sc3.cp2a.ub.sh -->
umask 007
cd
cd super
cd suba
git checkout master
echo bb >>b.txt
git add b.txt
git commit -m "Modify b.txt"
git pull
git push
</pre>
Typical Results:
<pre class="bl" >
gub@oldpete:~$ sc3.cp2a.ub.sh 
+ umask 007
+ cd
+ cd super
+ cd suba
+ git checkout master
Already on branch "master"
+ echo bb
+ git add b.txt
+ git commit -m 'Modify b.txt'
Created commit 2a306a6: Modify b.txt
 1 files changed, 1 insertions(+), 0 deletions(-)
+ git pull
remote: Counting objects: 8, done.
remote: Compressing objects: 100% (4/4), done.
remote: Total 5 (delta 1), reused 0 (delta 0)
Unpacking objects: 100% (5/5), done.
From file:///public/repos/suba
   923a0dd..bd4ab57  master     -> origin/master
Merge made by recursive.
 a.txt |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)
+ git push
Counting objects: 8, done.
Compressing objects: 100% (4/4), done.
Writing objects: 100% (5/5), 529 bytes, done.
Total 5 (delta 2), reused 0 (delta 0)
Unpacking objects: 100% (5/5), done.
To file:///public/repos/suba.git
   bd4ab57..ef0e01d  master -> master
+ set +x
</pre>
<h3>Commit/Push  3 - User:gub - Supermodule</h3>
Typical Command Sequence:
<pre class="bl" >
<!-- See: sc3.cp3a.ub.sh -->
umask 002
cd
cd super
git status
git add .
git commit -m "Update submodules from $(pwd)"
git pull
git push
</pre>
Typical Results:
<pre class="bl" >
gub@oldpete:~$ sc3.cp3a.ub.sh 
+ umask 002
+ cd
+ cd super
+ git status
# On branch master
# Changed but not updated:
#   (use "git add <file>..." to update what will be committed)
#
#       modified:   suba
#
no changes added to commit (use "git add" and/or "git commit -a")
+ git add .
++ pwd
+ git commit -m 'Update submodules from /home/gub/super'
Created commit 2d0b756: Update submodules from /home/gub/super
 1 files changed, 1 insertions(+), 1 deletions(-)
+ git pull
Already up-to-date.
+ git push
Counting objects: 3, done.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (2/2), 269 bytes, done.
Total 2 (delta 1), reused 0 (delta 0)
Unpacking objects: 100% (2/2), done.
To /public/repos/super.git
   01013d1..2d0b756  master -> master
+ set +x
</pre>
<h3>Commit/Push  4 - User:gua - Supermodule</h3>
Typical Command Sequence:
<pre class="bl" >
<!-- See: sc3.cp4a.ua.sh -->
umask 002
cd
cd super
git status
git add .
git commit -m "Update submodules from $(pwd)"
git pull
</pre>
Typical Results:
<pre class="bl" >
gua@oldpete:~$ sc3.cp4a.ua.sh 
+ umask 002
+ cd
+ cd super
+ git status
# On branch master
# Changed but not updated:
#   (use "git add <file>..." to update what will be committed)
#
#       modified:   suba
#
no changes added to commit (use "git add" and/or "git commit -a")
+ git add .
++ pwd
+ git commit -m 'Update submodules from /home/gua/super'
Created commit f4aa5e7: Update submodules from /home/gua/super
 1 files changed, 1 insertions(+), 1 deletions(-)
+ git pull
remote: Counting objects: 6, done.
remote: Compressing objects: 100% (5/5), done.
remote: Total 5 (delta remote: 3), reused 0 (delta 0)
Unpacking objects: 100% (5/5), done.
From /public/repos/super
   01f4452..2d0b756  master     -> origin/master
Auto-merged suba
CONFLICT (submodule): Merge conflict in suba - needs ef0e01d4288ec0195e55d06467fc18004b7c7682
Automatic merge failed; fix conflicts and then commit the result.
+ set +x
</pre>
<p>Another submodule merge conflict.  Fix this as before.</p>
</p>
Recovery Command Sequence:
<pre class="bl" >
<!-- See: sc3.cp4b.ua.sh -->
umask 002
cd
cd super
git submodule update
git add suba
git commit -m "Update submodule suba from $(pwd), after conflict"
git push
</pre>
</pre>
Recovery Results:
<pre class="bl" >
gua@oldpete:~$ sc3.cp4b.ua.sh 
+ umask 002
+ cd
+ cd super
+ git submodule update
remote: Counting objects: 8, done.
remote: Compressing objects: 100% (4/4), done.
remote: Total 5 (delta 2), reused 0 (delta 0)
Unpacking objects: 100% (5/5), done.
From file:///public/repos/suba
   bd4ab57..ef0e01d  master     -> origin/master
Submodule path 'suba': checked out '4a549d5b12951dc3f8cf7e844da1dcf142e2b9f0'
Submodule path 'suba': checked out 'bd4ab573d737241c5ad1d0ab2758a77b6465ddff'
Submodule path 'suba': checked out 'ef0e01d4288ec0195e55d06467fc18004b7c7682'
+ git add suba
++ pwd
+ git commit -m 'Update submodule suba from /home/gua/super, after conflict'
Created commit 1a233b1: Update submodule suba from /home/gua/super, after conflict
+ git push
Counting objects: 5, done.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 482 bytes, done.
Total 3 (delta 1), reused 0 (delta 0)
Unpacking objects: 100% (3/3), done.
To /public/repos/super.git
   2d0b756..1a233b1  master -> master
+ set +x
</pre>
<hr />
<p>Back to main page: <a href="../readme.html">Main</a>
</p>
</div>
<div class="footer" >
<p style="font-weight: bold" >Submodule Workflow Scenarios</p>
</div>
</div>
</body>

